{% extends 'base.html' %}

{% block title %}Créer Ordonnance{% endblock %}

{% block head %}
<!-- Tailwind CDN -->
<script src="https://cdn.tailwindcss.com"></script>
{% endblock %}

{% block sidebar %}
    <a href="{% url 'doctor_dashboard' %}"
       class="flex items-center space-x-3 p-3 rounded-lg font-medium transition duration-150 ease-in-out
              text-gray-700 hover:bg-gray-100">
        <i class="fa-solid fa-gauge-high w-5 h-5"></i>
        <span>Tableau de bord</span>
    </a>

    <a href="{% url 'list_patients' %}"
       class="flex items-center space-x-3 p-3 rounded-lg font-medium text-gray-700 hover:bg-gray-100 transition">
        <i class="fa-solid fa-user-injured w-5 h-5"></i>
        <span>Mes Patients</span>
    </a>

    <a href="{% url 'doctor_weekly_schedule' %}" class="flex items-center space-x-3 p-3 rounded-lg font-medium text-gray-700 hover:bg-gray-100 transition">
        <i class="fa-solid fa-calendar-week w-5 h-5"></i>
        <span>Mon Planning</span>
    </a>

    <!-- Toujours en vert : Créer Ordonnance -->
    <a href="{% url 'create_ordonnance' %}"class="flex items-center space-x-3 p-3 rounded-lg font-medium bg-emerald-600 text-white shadow-md transition">
        <i class="fa-solid fa-file-medical w-5 h-5"></i>
        <span>Créer Ordonnance</span>
    </a>
        <a href="{% url 'doctor_ordonnances' %}" class="flex items-center space-x-3 p-3 rounded-lg text-gray-700 hover:bg-gray-100 transition">
        <i class="fa-solid fa-prescription-bottle-medical w-5 h-5"></i>
        <span>Mes Ordonnances</span>
    </a>
    <a href="{% url 'profile_info' %}"
       class="flex items-center space-x-3 p-3 rounded-lg font-medium text-gray-700 hover:bg-gray-100 transition">
        <i class="fa-solid fa-user-gear w-5 h-5"></i>
        <span>Mon Profil</span>
    </a>
{% endblock %}

{% block content %}
<div class="max-w-3xl mx-auto mt-4 p-8 bg-white shadow-lg rounded-xl border border-gray-100">
    <h2 class="text-3xl font-bold text-gray-800 mb-8 flex items-center gap-2">
        <i class="fa-solid fa-prescription text-indigo-600"></i>
        Créer une ordonnance
    </h2>

    <form method="post" class="space-y-6">
        {% csrf_token %}

        <!-- Patient -->
        <div>
            <label for="patient" class="block font-semibold text-gray-700 mb-1">Patient</label>
            <select id="patient" name="patient"
                class="w-full rounded-lg border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 bg-gray-50">
                {% for patient in patients %}
                    <option value="{{ patient.id }}">{{ patient.full_name }}</option>
                {% endfor %}
            </select>
        </div>

        <!-- Date -->
        <div>
            <label for="date" class="block font-semibold text-gray-700 mb-1">Date</label>
            <input type="date" id="date" name="date"
                   class="w-full rounded-lg border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 bg-gray-50">
        </div>

        <!-- Diagnostic -->
        <div>
            <label for="diagnostic" class="block font-semibold text-gray-700 mb-1">Motif / Diagnostic</label>
            <textarea id="diagnostic" name="diagnostic"
                      class="w-full rounded-lg border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500 p-3 bg-gray-50 h-24"></textarea>
        </div>

        <!-- Prescription -->
        <div>
            <label for="prescription" class="block font-semibold text-gray-700 mb-1">Prescription *</label>
            <textarea id="prescription" name="prescription" required
                      class="w-full rounded-lg border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500 p-3 bg-gray-50 h-32"></textarea>
        </div>

        <!-- Notes -->
        <div>
            <label for="notes" class="block font-semibold text-gray-700 mb-1">Notes / Instructions</label>
            <textarea id="notes" name="notes"
                      class="w-full rounded-lg border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500 p-3 bg-gray-50 h-24"></textarea>
        </div>

        <!-- Priorité -->
        <div>
            <label for="priority" class="block font-semibold text-gray-700 mb-1">Priorité</label>
            <select id="priority" name="priority"
                class="w-full rounded-lg border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 bg-gray-50">
                <option value="Normal">Normal</option>
                <option value="Urgent">Urgent</option>
            </select>
        </div>

        <input type="hidden" name="doctor" value="{{ request.user.id }}">

        <!-- Submit Button -->
        <div class="pt-4">
            <button type="submit"
                    class="w-full bg-indigo-600 text-white py-3 rounded-lg font-semibold shadow-md hover:bg-indigo-700 transition">
                <i class="fa-solid fa-check-circle mr-2"></i>
                Créer l’ordonnance
            </button>
        </div>
    </form>

</div>
{% endblock %}
